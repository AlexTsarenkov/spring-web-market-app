## Spring web market app — Витрина интернет-магазина

Веб-приложение витрины интернет-магазина, реализованное на Spring Boot 
с использованием Thymeleaf, Maven и покрытием тестами. Проект выполнен
в рамках курса Яндекс.Практикум.

Проект демонстрирует:

-   работу MVC в Spring Boot
-   серверный рендеринг (Thymeleaf)
-   корзину товаров
-   оформление заказов
-   пагинацию, поиск и сортировку
-   тестирование приложения

------------------------------------------------------------------------

## Функциональность

#### Витрина товаров

-   просмотр списка товаров
-   поиск по названию и описанию
-   сортировка:
    -   NO — без сортировки
    -   ALPHA — по названию
    -   PRICE — по цене
-   пагинация
-   добавление/удаление товаров из корзины

 #### Страница товара

-   просмотр детальной информации
-   изменение количества в корзине

 #### Корзина

-   просмотр товаров в корзине
-   изменение количества
-   удаление товаров
-   подсчёт общей суммы
-   оформление заказа

 #### Заказы

-   список заказов
-   просмотр конкретного заказа
-   отметка нового заказа

------------------------------------------------------------------------

 ## Технологии

-   Java 21
-   Spring Boot
-   Spring MVC
-   Spring Data JPA
-   Thymeleaf
-   Maven
-   PostgreSQL
-   JUnit 5
-   Mockito
  - Testcontainers
------------------------------------------------------------------------

## Запуск проекта

1. Клонировать репозиторий

- git clone https://github.com/AlexTsarenkov/spring-web-market-app/tree/sprint-5-webmvc-app.git
- cd my-market-app

2. Настроить БД

В application.properties указать параметры подключения:

    spring.datasource.url=jdbc:postgresql://dbhost/dbtab
    spring.datasource.username=postgres_user
    spring.datasource.password=postgres_password
    spring.jpa.hibernate.ddl-auto=update

3. Собрать и запустить

   mvn clean install
   mvn spring-boot:run

Приложение будет доступно:

    http://localhost:8080

------------------------------------------------------------------------

## API эндпоинты

### Товары (Items)

#### Получение витрины товаров

``` http
GET /?search=&sort=&pageNumber=&pageSize=
GET /items?search=&sort=&pageNumber=&pageSize=
```

**Query параметры**

| Параметр     | Обязательный | По умолчанию | Описание                   |
|--------------|--------------|--------------|----------------------------|
| `search`     | ❌           | —            | Поиск по названию/описанию |
| `sort`       | ❌           | `NO`         | `NO`, `ALPHA`, `PRICE`     |
| `pageNumber` | ❌           | `1`          | Номер страницы             |
| `pageSize`   | ❌           | `5`          | Размер страницы            |

**Response:** `items.html`

------------------------------------------------------------------------

#### Изменение количества товара (с витрины)

``` http
POST /items?id=&action=
```

**Query параметры**

| Параметр | Обязательный | Описание         |
|----------|--------------|------------------|
| `id`     | ✅           | ID товара        |
| `action` | ✅           | `PLUS` / `MINUS` |

**Response:** redirect → `/items`

------------------------------------------------------------------------

#### Получение страницы товара

``` http
GET /items/{id}
```

**Response:** `item.html`

------------------------------------------------------------------------

#### Изменение количества товара (со страницы товара)

``` http
POST /items/{id}?action=
```

**Query параметры**

| Параметр | Обязательный | Описание         |
|----------|--------------|------------------|
| `action` | ✅           | `PLUS` / `MINUS` |

**Response:** `item.html`

------------------------------------------------------------------------

### Корзина (Cart)

#### Получение корзины

``` http
GET /cart/items
```

**Response:** `cart.html`

------------------------------------------------------------------------

#### Изменение корзины

``` http
POST /cart/items?id=&action=
```

**Query параметры**

| Параметр | Обязательный | Описание         |
|----------|--------------|------------------|
| `id`     | ✅           | ID товара        |
| `action` | ✅           | `PLUS` / `MINUS` |

**Response:** `cart.html`

------------------------------------------------------------------------

### Заказы (Orders)

#### Получение списка заказов

``` http
GET /orders
```

**Response:** `orders.html`

------------------------------------------------------------------------

#### Получение заказа

``` http
GET /orders/{id}?newOrder=
```

**Query параметры**

| Параметр   | Обязательный | По умолчанию | Описание              |
|------------|--------------|--------------|-----------------------|
| `newOrder` | ❌           | `false`      | Признак нового заказа |

**Response:** `order.html`

------------------------------------------------------------------------

#### Оформление заказа

``` http
POST /buy
```

**Response:** redirect → `/orders/{id}?newOrder=true`
Тестирование

## Запуск тестов:

    mvn test

Покрываются:

-   сервисный слой
-   бизнес-логика корзины
-   оформление заказа
